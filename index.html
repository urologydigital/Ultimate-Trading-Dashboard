<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unified Trading Dashboard - Technical + Macro + Geopolitical Analysis</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            min-height: 100vh;
            padding: 15px;
            color: #e2e8f0;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
        }

        header {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            padding: 30px;
            border-radius: 24px;
            box-shadow: 0 25px 70px rgba(0,0,0,0.6);
            margin-bottom: 25px;
            text-align: center;
            border: 1px solid rgba(96, 165, 250, 0.2);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899, #f59e0b, #3b82f6);
            background-size: 200% 100%;
            animation: gradient 4s linear infinite;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }

        h1 {
            background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 50%, #f472b6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2.8em;
            margin-bottom: 12px;
            font-weight: 900;
            letter-spacing: -0.03em;
        }

        .subtitle {
            color: #94a3b8;
            font-size: 1.15em;
            font-weight: 500;
            margin-bottom: 15px;
        }

        .overall-score {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .score-card {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            padding: 20px;
            border-radius: 16px;
            text-align: center;
            border: 1px solid rgba(96, 165, 250, 0.2);
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
        }

        .score-label {
            color: #94a3b8;
            font-size: 0.9em;
            margin-bottom: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .score-value {
            font-size: 2.5em;
            font-weight: 900;
            margin: 10px 0;
        }

        .score-bullish { color: #10b981; }
        .score-bearish { color: #ef4444; }
        .score-neutral { color: #f59e0b; }

        .tab-navigation {
            display: flex;
            gap: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            justify-content: center;
            background: rgba(30, 41, 59, 0.6);
            padding: 15px;
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .tab-btn {
            background: transparent;
            color: #94a3b8;
            border: 2px solid rgba(148, 163, 184, 0.2);
            padding: 14px 28px;
            border-radius: 14px;
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .tab-btn:hover {
            background: rgba(96, 165, 250, 0.1);
            border-color: #60a5fa;
            color: #60a5fa;
            transform: translateY(-2px);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
            border-color: transparent;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-size: 1.8em;
            color: #60a5fa;
            margin: 25px 0 20px 0;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .card {
            background: linear-gradient(135deg, #1e293b 0%, #1e293b 100%);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.4);
            border: 1px solid rgba(96, 165, 250, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(59, 130, 246, 0.3);
            border-color: rgba(96, 165, 250, 0.4);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255,255,255,0.1);
        }

        .card-title {
            font-size: 1.4em;
            font-weight: 700;
            color: #60a5fa;
        }

        .badge {
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 700;
        }

        .badge-bullish {
            background: rgba(16, 185, 129, 0.15);
            color: #10b981;
            border: 2px solid rgba(16, 185, 129, 0.3);
        }

        .badge-bearish {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
            border: 2px solid rgba(239, 68, 68, 0.3);
        }

        .badge-neutral {
            background: rgba(245, 158, 11, 0.15);
            color: #f59e0b;
            border: 2px solid rgba(245, 158, 11, 0.3);
        }

        .metric-value {
            font-size: 2.5em;
            font-weight: 900;
            text-align: center;
            margin: 20px 0;
        }

        .value-bullish { color: #10b981; }
        .value-bearish { color: #ef4444; }
        .value-neutral { color: #f59e0b; }

        .info-box {
            background: rgba(59, 130, 246, 0.08);
            border: 1px solid rgba(59, 130, 246, 0.2);
            padding: 15px;
            border-radius: 12px;
            margin-top: 15px;
        }

        .info-title {
            font-weight: 700;
            color: #60a5fa;
            margin-bottom: 8px;
        }

        .info-text {
            color: #cbd5e1;
            line-height: 1.6;
            font-size: 0.95em;
        }

        .recommendation-box {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(16, 185, 129, 0.05));
            border-left: 4px solid #10b981;
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .recommendation-box.bearish {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(239, 68, 68, 0.05));
            border-left-color: #ef4444;
        }

        .recommendation-title {
            font-size: 1.3em;
            font-weight: 800;
            margin-bottom: 15px;
            color: #f1f5f9;
        }

        .recommendation-list {
            list-style: none;
            line-height: 1.8;
        }

        .recommendation-list li::before {
            content: '‚úì ';
            color: #10b981;
            font-weight: bold;
            margin-right: 10px;
        }

        .recommendation-box.bearish .recommendation-list li::before {
            content: '‚úó ';
            color: #ef4444;
        }

        .chart-container {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.4);
        }

        .alert-banner {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            padding: 15px 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            border: 1px solid rgba(255,255,255,0.2);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 20px rgba(220, 38, 38, 0.3); }
            50% { box-shadow: 0 0 40px rgba(220, 38, 38, 0.6); }
        }

        .help-box {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            padding: 25px;
            border-radius: 16px;
            margin: 25px 0;
        }

        .help-title {
            font-weight: 800;
            color: #a78bfa;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th {
            background: rgba(59, 130, 246, 0.2);
            padding: 12px;
            text-align: left;
            color: #60a5fa;
            font-weight: 700;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        tr:hover {
            background: rgba(59, 130, 246, 0.05);
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2em;
            }

            .tab-navigation {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ Unified Trading Command Center</h1>
            <p class="subtitle">Technical Analysis ‚Ä¢ Macroeconomic Analysis ‚Ä¢ Geopolitical Risk Assessment</p>
            <div style="margin-top: 12px; font-size: 0.9em; color: #94a3b8;">
                <span id="lastUpdate"></span>
            </div>
        </header>

        <!-- Overall Market Assessment -->
        <div class="overall-score" id="overallScore">
            <!-- Populated by JavaScript -->
        </div>

        <!-- Tab Navigation -->
        <div class="tab-navigation">
            <button class="tab-btn active" onclick="switchTab('overview')">üìä Overview</button>
            <button class="tab-btn" onclick="switchTab('technical')">üìà Technical Analysis</button>
            <button class="tab-btn" onclick="switchTab('macro')">üí∞ Macro Analysis</button>
            <button class="tab-btn" onclick="switchTab('geopolitical')">üåç Geopolitical Risk</button>
            <button class="tab-btn" onclick="switchTab('recommendations')">üéØ Trading Plan</button>
        </div>

        <!-- OVERVIEW TAB -->
        <div id="overview" class="tab-content active">
            <h2 class="section-title">üìä Market Overview & Summary</h2>
            
            <div id="summaryRecommendation">
                <!-- Populated by JavaScript -->
            </div>

            <div class="grid" id="quickMetrics">
                <!-- Populated by JavaScript -->
            </div>

            <div class="chart-container">
                <canvas id="overviewChart" height="80"></canvas>
            </div>
        </div>

        <!-- TECHNICAL ANALYSIS TAB -->
        <div id="technical" class="tab-content">
            <h2 class="section-title">üìà Technical Indicators</h2>
            
            <div class="grid" id="technicalIndicators">
                <!-- Populated by JavaScript -->
            </div>

            <h2 class="section-title">üíπ Crypto Market Analysis</h2>
            <div class="grid" id="cryptoMarket">
                <!-- Populated by JavaScript -->
            </div>
        </div>

        <!-- MACRO ANALYSIS TAB -->
        <div id="macro" class="tab-content">
            <h2 class="section-title">üí∞ Key Economic Indicators</h2>
            
            <div class="grid" id="macroIndicators">
                <!-- Populated by JavaScript -->
            </div>

            <h2 class="section-title">üéØ Economic Scenarios</h2>
            <div class="grid" id="macroScenarios">
                <!-- Populated by JavaScript -->
            </div>

            <div class="chart-container">
                <canvas id="macroChart" height="80"></canvas>
            </div>
        </div>

        <!-- GEOPOLITICAL TAB -->
        <div id="geopolitical" class="tab-content">
            <div id="geopoliticalAlert">
                <!-- Populated by JavaScript -->
            </div>

            <h2 class="section-title">üåç Active Geopolitical Events</h2>
            <div class="grid" id="geopoliticalEvents">
                <!-- Populated by JavaScript -->
            </div>

            <h2 class="section-title">üó∫Ô∏è Regional Risk Assessment</h2>
            <div class="grid" id="regionalRisk">
                <!-- Populated by JavaScript -->
            </div>
        </div>

        <!-- RECOMMENDATIONS TAB -->
        <div id="recommendations" class="tab-content">
            <h2 class="section-title">üéØ Integrated Trading Plan</h2>
            
            <div id="tradingPlan">
                <!-- Populated by JavaScript -->
            </div>

            <h2 class="section-title">üìÖ This Week's Critical Events</h2>
            <table id="weeklyCalendar">
                <!-- Populated by JavaScript -->
            </table>

            <div class="help-box" style="margin-top: 30px;">
                <div class="help-title">üí° How to Use This Dashboard</div>
                <div style="color: #cbd5e1; line-height: 1.8;">
                    <p><strong>Daily Routine (5 minutes):</strong></p>
                    <ol style="margin-left: 20px; margin-top: 10px;">
                        <li>Check <strong>Overview</strong> tab - Overall market sentiment</li>
                        <li>Review <strong>Trading Plan</strong> tab - Today's actionable recommendations</li>
                        <li>Check <strong>Technical</strong> - Entry/exit points</li>
                        <li>Scan <strong>Macro</strong> and <strong>Geopolitical</strong> for major changes</li>
                    </ol>
                    <p style="margin-top: 15px;"><strong>Before ANY Trade:</strong></p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>All 3 analyses aligned? (Technical + Macro + Geo all green = GO)</li>
                        <li>Any red flags in geopolitical events?</li>
                        <li>Is macro environment supportive?</li>
                        <li>What do technical indicators say about timing?</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Update timestamp
        function updateTimestamp() {
            const now = new Date();
            document.getElementById('lastUpdate').textContent = 'Last Updated: ' + now.toLocaleString();
        }
        updateTimestamp();

        // Integrated Data
        const marketData = {
            technical: {
                btc: {
                    price: 104500,
                    change24h: 2.3,
                    rsi: 58,
                    macd: 'Bullish',
                    ma20: 102000,
                    ma50: 98000,
                    signal: 3
                },
                eth: {
                    price: 3850,
                    change24h: 1.8,
                    rsi: 61,
                    signal: 2
                }
            },
            macro: {
                fedRate: { value: '5.50%', trend: 'stable', score: -2 },
                inflation: { value: '3.2%', trend: 'down', score: 1 },
                dxy: { value: 104.2, trend: 'down', score: 2 },
                m2: { value: '$21.1T', trend: 'stable', score: 0 },
                gdp: { value: '2.1%', trend: 'down', score: 0 },
                yields: { value: '4.65%', trend: 'down', score: 1 }
            },
            geopolitical: {
                globalRisk: 'HIGH',
                activeEvents: 3,
                criticalEvents: 1
            }
        };

        // Calculate overall scores
        function calculateOverallScore() {
            // Technical score (out of 5)
            const technicalScore = marketData.technical.btc.signal;
            
            // Macro score (sum of all indicator scores)
            const macroScoreRaw = Object.values(marketData.macro).reduce((sum, ind) => sum + (ind.score || 0), 0);
            const macroScore = Math.max(-3, Math.min(3, macroScoreRaw)); // Normalize to -3 to +3
            
            // Geopolitical score (inverse of risk)
            const geoScore = marketData.geopolitical.globalRisk === 'LOW' ? 2 : 
                            marketData.geopolitical.globalRisk === 'MODERATE' ? 0 : -2;
            
            // Overall score
            const totalScore = technicalScore + macroScore + geoScore;
            
            let sentiment = 'NEUTRAL';
            let sentimentClass = 'neutral';
            let recommendation = 'Small positions only. Mixed signals.';
            
            if (totalScore >= 4) {
                sentiment = 'VERY BULLISH';
                sentimentClass = 'bullish';
                recommendation = 'Strong buy signals across all analyses. Consider 5% positions.';
            } else if (totalScore >= 2) {
                sentiment = 'BULLISH';
                sentimentClass = 'bullish';
                recommendation = 'Favorable conditions. Consider 3-4% positions.';
            } else if (totalScore <= -4) {
                sentiment = 'VERY BEARISH';
                sentimentClass = 'bearish';
                recommendation = 'High risk environment. Defensive positioning recommended.';
            } else if (totalScore <= -2) {
                sentiment = 'BEARISH';
                sentimentClass = 'bearish';
                recommendation = 'Challenging conditions. Reduce exposure or wait.';
            }
            
            return {
                technical: technicalScore,
                macro: macroScore,
                geopolitical: geoScore,
                total: totalScore,
                sentiment,
                sentimentClass,
                recommendation
            };
        }

        // Render overall score
        function renderOverallScore() {
            const score = calculateOverallScore();
            const container = document.getElementById('overallScore');
            
            container.innerHTML = `
                <div class="score-card">
                    <div class="score-label">Overall Sentiment</div>
                    <div class="score-value score-${score.sentimentClass}">${score.sentiment}</div>
                    <div style="font-size: 0.9em; color: #94a3b8; margin-top: 5px;">Score: ${score.total}/10</div>
                </div>
                <div class="score-card">
                    <div class="score-label">Technical Score</div>
                    <div class="score-value score-${score.technical > 0 ? 'bullish' : score.technical < 0 ? 'bearish' : 'neutral'}">${score.technical > 0 ? '+' : ''}${score.technical}/5</div>
                    <div style="font-size: 0.9em; color: #94a3b8; margin-top: 5px;">
                        ${score.technical > 2 ? 'Strong buy signals' : score.technical > 0 ? 'Moderate buy' : score.technical < -2 ? 'Strong sell' : score.technical < 0 ? 'Weak' : 'Neutral'}
                    </div>
                </div>
                <div class="score-card">
                    <div class="score-label">Macro Score</div>
                    <div class="score-value score-${score.macro > 0 ? 'bullish' : score.macro < 0 ? 'bearish' : 'neutral'}">${score.macro > 0 ? '+' : ''}${score.macro}/3</div>
                    <div style="font-size: 0.9em; color: #94a3b8; margin-top: 5px;">
                        ${score.macro > 1 ? 'Supportive' : score.macro < -1 ? 'Headwinds' : 'Mixed'}
                    </div>
                </div>
                <div class="score-card">
                    <div class="score-label">Geopolitical Risk</div>
                    <div class="score-value score-${score.geopolitical > 0 ? 'bullish' : score.geopolitical < 0 ? 'bearish' : 'neutral'}">${marketData.geopolitical.globalRisk}</div>
                    <div style="font-size: 0.9em; color: #94a3b8; margin-top: 5px;">
                        ${marketData.geopolitical.activeEvents} active events
                    </div>
                </div>
            `;
        }

        // Render summary recommendation
        function renderSummaryRecommendation() {
            const score = calculateOverallScore();
            const container = document.getElementById('summaryRecommendation');
            
            const boxClass = score.sentimentClass === 'bullish' ? '' : score.sentimentClass === 'bearish' ? 'bearish' : '';
            
            container.innerHTML = `
                <div class="recommendation-box ${boxClass}">
                    <div class="recommendation-title">${score.sentiment} Market Environment</div>
                    <p style="color: #cbd5e1; margin-bottom: 15px; line-height: 1.7;">
                        ${score.recommendation}
                    </p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 20px;">
                        <div>
                            <strong style="color: #60a5fa;">Technical:</strong>
                            <p style="color: #94a3b8; margin-top: 5px;">
                                BTC signal: ${score.technical}/5 ‚Ä¢ RSI: ${marketData.technical.btc.rsi} ‚Ä¢ MACD: ${marketData.technical.btc.macd}
                            </p>
                        </div>
                        <div>
                            <strong style="color: #60a5fa;">Macro:</strong>
                            <p style="color: #94a3b8; margin-top: 5px;">
                                Fed: ${marketData.macro.fedRate.value} ‚Ä¢ DXY: ${marketData.macro.dxy.value} (${marketData.macro.dxy.trend === 'down' ? '‚Üì good' : '‚Üë bad'})
                            </p>
                        </div>
                        <div>
                            <strong style="color: #60a5fa;">Geopolitical:</strong>
                            <p style="color: #94a3b8; margin-top: 5px;">
                                Global risk: ${marketData.geopolitical.globalRisk} ‚Ä¢ ${marketData.geopolitical.activeEvents} active tensions
                            </p>
                        </div>
                    </div>
                </div>
            `;
        }

        // Render quick metrics
        function renderQuickMetrics() {
            const container = document.getElementById('quickMetrics');
            
            container.innerHTML = `
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Bitcoin</div>
                        <span class="badge badge-bullish">BUY +${marketData.technical.btc.signal}</span>
                    </div>
                    <div class="metric-value value-bullish">$${marketData.technical.btc.price.toLocaleString()}</div>
                    <div style="text-align: center; color: #10b981; font-weight: 700; margin-bottom: 15px;">
                        +${marketData.technical.btc.change24h}% (24h)
                    </div>
                    <div class="info-box">
                        <div class="info-title">Technical Analysis</div>
                        <div class="info-text">
                            RSI: ${marketData.technical.btc.rsi} (Neutral)<br>
                            MACD: ${marketData.technical.btc.macd}<br>
                            Price > MA-20: ‚úÖ Bullish<br>
                            Golden Cross: Active
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Fed Funds Rate</div>
                        <span class="badge badge-bearish">RESTRICTIVE</span>
                    </div>
                    <div class="metric-value value-bearish">${marketData.macro.fedRate.value}</div>
                    <div style="text-align: center; color: #94a3b8; font-weight: 600; margin-bottom: 15px;">
                        Paused (was hiking)
                    </div>
                    <div class="info-box">
                        <div class="info-title">Impact</div>
                        <div class="info-text">
                            High rates = expensive money<br>
                            Bearish for crypto short-term<br>
                            Watch for rate cuts Q2 2025
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Geopolitical Risk</div>
                        <span class="badge badge-bearish">HIGH</span>
                    </div>
                    <div class="metric-value value-bearish">${marketData.geopolitical.activeEvents}</div>
                    <div style="text-align: center; color: #94a3b8; font-weight: 600; margin-bottom: 15px;">
                        Active tensions
                    </div>
                    <div class="info-box">
                        <div class="info-title">Key Events</div>
                        <div class="info-text">
                            Middle East tensions<br>
                            China-Taiwan concerns<br>
                            Russia sanctions expanding
                        </div>
                    </div>
                </div>
            `;
        }

        // Render technical indicators (simplified)
        function renderTechnicalIndicators() {
            const container = document.getElementById('technicalIndicators');
            
            container.innerHTML = `
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">RSI (Relative Strength)</div>
                        <span class="badge badge-neutral">NEUTRAL</span>
                    </div>
                    <div class="metric-value value-neutral">${marketData.technical.btc.rsi}</div>
                    <div class="info-box">
                        <div class="info-title">Interpretation</div>
                        <div class="info-text">
                            < 30: Oversold (buy)<br>
                            30-70: Normal range<br>
                            > 70: Overbought (sell)<br><br>
                            <strong>Current:</strong> Neutral zone, no extreme signals
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">MACD</div>
                        <span class="badge badge-bullish">BULLISH</span>
                    </div>
                    <div class="metric-value value-bullish">POSITIVE</div>
                    <div class="info-box">
                        <div class="info-title">Interpretation</div>
                        <div class="info-text">
                            MACD above signal line = bullish<br>
                            Positive momentum trending<br>
                            Crossover signal active<br><br>
                            <strong>Action:</strong> Confirms uptrend
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Moving Averages</div>
                        <span class="badge badge-bullish">GOLDEN CROSS</span>
                    </div>
                    <div class="metric-value value-bullish">ALIGNED</div>
                    <div class="info-box">
                        <div class="info-title">Interpretation</div>
                        <div class="info-text">
                            MA-20: $${marketData.technical.btc.ma20.toLocaleString()}<br>
                            MA-50: $${marketData.technical.btc.ma50.toLocaleString()}<br>
                            Price above both ‚úÖ<br>
                            Golden Cross active = very bullish
                        </div>
                    </div>
                </div>
            `;
        }

        // Render macro indicators (simplified)
        function renderMacroIndicators() {
            const container = document.getElementById('macroIndicators');
            
            container.innerHTML = `
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üè¶ Federal Funds Rate</div>
                        <span class="badge badge-bearish">5.50%</span>
                    </div>
                    <div class="info-box">
                        <div class="info-title">What This Means</div>
                        <div class="info-text">
                            At restrictive levels after 11 hikes<br>
                            High rates = strong USD, expensive money<br>
                            <strong>Impact:</strong> Bearish for crypto (-15%)<br>
                            Watch for Fed pivot to rate cuts
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üíµ DXY (Dollar Index)</div>
                        <span class="badge badge-bullish">104.2 ‚Üì</span>
                    </div>
                    <div class="info-box">
                        <div class="info-title">What This Means</div>
                        <div class="info-text">
                            Falling from 20-year highs<br>
                            <strong>Correlation: -0.72 with Bitcoin</strong><br>
                            Weak dollar = Strong crypto<br>
                            <strong>Impact:</strong> Bullish for BTC (+12%)
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üìâ CPI Inflation</div>
                        <span class="badge badge-neutral">3.2%</span>
                    </div>
                    <div class="info-box">
                        <div class="info-title">What This Means</div>
                        <div class="info-text">
                            Above Fed's 2% target but falling<br>
                            Disinflation = potential rate cuts ahead<br>
                            <strong>Impact:</strong> Mixed for crypto<br>
                            Long-term bullish (inflation hedge)
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">üí∞ M2 Money Supply</div>
                        <span class="badge badge-bearish">$21.1T ‚Üí</span>
                    </div>
                    <div class="info-box">
                        <div class="info-title">What This Means</div>
                        <div class="info-text">
                            <strong>CRITICAL:</strong> Correlation +0.81 with BTC<br>
                            Stabilizing after historic decline<br>
                            Not growing yet = no tailwind<br>
                            If M2 starts growing = Bitcoin moon
                        </div>
                    </div>
                </div>
            `;
        }

        // Render geopolitical events (simplified)
        function renderGeopoliticalEvents() {
            const container = document.getElementById('geopoliticalEvents');
            
            container.innerHTML = `
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Middle East Tensions</div>
                        <span class="badge badge-bearish">HIGH RISK</span>
                    </div>
                    <div class="info-box">
                        <div class="info-title">Impact Prediction</div>
                        <div class="info-text">
                            <strong>Oil:</strong> +8-15% (supply concerns)<br>
                            <strong>Gold:</strong> +5% (safe haven)<br>
                            <strong>Bitcoin:</strong> -3% initially, +5% recovery<br>
                            <strong>Strategy:</strong> Hedge with gold
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">Russia Sanctions</div>
                        <span class="badge badge-neutral">MODERATE</span>
                    </div>
                    <div class="info-box">
                        <div class="info-title">Impact Prediction</div>
                        <div class="info-text">
                            <strong>Bitcoin:</strong> +6% (sanctions evasion)<br>
                            <strong>Natural Gas:</strong> +12% (EU supply)<br>
                            <strong>Gold:</strong> +3% (de-dollarization)<br>
                            <strong>Strategy:</strong> BTC benefits medium-term
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <div class="card-title">China-Taiwan</div>
                        <span class="badge badge-bearish">ELEVATED</span>
                    </div>
                    <div class="info-box">
                        <div class="info-title">Impact Prediction</div>
                        <div class="info-text">
                            <strong>Bitcoin:</strong> -4% (risk-off)<br>
                            <strong>Gold:</strong> +5% (safe haven rush)<br>
                            <strong>Tech Stocks:</strong> -10% (semiconductor)<br>
                            <strong>Strategy:</strong> Monitor closely
                        </div>
                    </div>
                </div>
            `;
        }

        // Render geopolitical alert
        function renderGeopoliticalAlert() {
            const container = document.getElementById('geopoliticalAlert');
            
            container.innerHTML = `
                <div class="alert-banner">
                    <div style="font-size: 2em;">‚ö†Ô∏è</div>
                    <div>
                        <strong>Current Global Risk Level:</strong>
                        <span style="margin-left: 10px; background: white; color: #dc2626; padding: 5px 15px; border-radius: 15px; font-weight: 800;">
                            ${marketData.geopolitical.globalRisk}
                        </span>
                        <div style="margin-top: 5px; font-size: 0.9em;">
                            ${marketData.geopolitical.activeEvents} active geopolitical tensions affecting markets
                        </div>
                    </div>
                </div>
            `;
        }

        // Render trading plan
        function renderTradingPlan() {
            const score = calculateOverallScore();
            const container = document.getElementById('tradingPlan');
            
            let plan = '';
            
            if (score.total >= 2) {
                plan = `
                    <div class="recommendation-box">
                        <div class="recommendation-title">‚úÖ BULLISH ENVIRONMENT - Consider Long Positions</div>
                        <p style="color: #cbd5e1; margin-bottom: 15px;">
                            Multiple factors aligned favorably. Good opportunity for strategic entries.
                        </p>
                        <ul class="recommendation-list">
                            <li><strong>Position Size:</strong> 3-5% of portfolio per trade</li>
                            <li><strong>Assets to Buy:</strong> Bitcoin, Ethereum (leading indicators bullish)</li>
                            <li><strong>Entry Strategy:</strong> Market orders on dips, or limit orders 2-3% below current</li>
                            <li><strong>Take Profit:</strong> TP1 at +8% (25%), TP2 at +15% (25%), TP3 at +25% (30%)</li>
                            <li><strong>Stop Loss:</strong> -8% from entry (move to breakeven after TP2)</li>
                            <li><strong>Risk/Reward:</strong> Minimum 1:2 ratio</li>
                        </ul>
                        <div style="margin-top: 20px; padding: 15px; background: rgba(59, 130, 246, 0.1); border-radius: 10px; border-left: 3px solid #60a5fa;">
                            <strong style="color: #60a5fa;">Key Catalysts:</strong>
                            <ul style="margin-left: 20px; margin-top: 10px; color: #cbd5e1; line-height: 1.7;">
                                <li>Technical: ${marketData.technical.btc.macd} MACD, RSI in healthy zone</li>
                                <li>Macro: DXY falling (good for crypto), Fed potentially pausing</li>
                                <li>Timing: Watch for Fed signals on rate cuts</li>
                            </ul>
                        </div>
                    </div>
                `;
            } else if (score.total <= -2) {
                plan = `
                    <div class="recommendation-box bearish">
                        <div class="recommendation-title">üõë BEARISH ENVIRONMENT - Defensive Positioning</div>
                        <p style="color: #cbd5e1; margin-bottom: 15px;">
                            Multiple headwinds present. Protect capital and wait for better conditions.
                        </p>
                        <ul class="recommendation-list">
                            <li><strong>Action:</strong> Reduce crypto exposure to 20-30% of portfolio</li>
                            <li><strong>Hedge:</strong> Allocate 20-30% to gold and stablecoins</li>
                            <li><strong>New Positions:</strong> WAIT - conditions not favorable</li>
                            <li><strong>Existing Positions:</strong> Tighten stop losses to -5%</li>
                            <li><strong>Cash Allocation:</strong> Keep 40-50% dry powder for better opportunities</li>
                        </ul>
                        <div style="margin-top: 20px; padding: 15px; background: rgba(239, 68, 68, 0.1); border-radius: 10px; border-left: 3px solid #ef4444;">
                            <strong style="color: #fca5a5;">Risk Factors:</strong>
                            <ul style="margin-left: 20px; margin-top: 10px; color: #cbd5e1; line-height: 1.7;">
                                <li>Macro: High interest rates, strong USD (bearish combo)</li>
                                <li>Geopolitical: ${marketData.geopolitical.globalRisk} risk environment</li>
                                <li>Strategy: Preserve capital, wait for Fed pivot signals</li>
                            </ul>
                        </div>
                    </div>
                `;
            } else {
                plan = `
                    <div class="recommendation-box" style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.05)); border-left-color: #f59e0b;">
                        <div class="recommendation-title">‚öñÔ∏è MIXED SIGNALS - Selective Trading Only</div>
                        <p style="color: #cbd5e1; margin-bottom: 15px;">
                            Some favorable factors, some headwinds. Trade carefully with reduced size.
                        </p>
                        <ul class="recommendation-list">
                            <li><strong>Position Size:</strong> 2-3% max (smaller than normal)</li>
                            <li><strong>Strategy:</strong> Cherry-pick only the strongest setups</li>
                            <li><strong>Stop Losses:</strong> Tight at -6% (higher risk environment)</li>
                            <li><strong>Portfolio Allocation:</strong> 30-40% crypto, 10-15% gold, 40-50% cash</li>
                            <li><strong>Be Selective:</strong> Wait for technical + macro + geo alignment</li>
                        </ul>
                        <div style="margin-top: 20px; padding: 15px; background: rgba(245, 158, 11, 0.1); border-radius: 10px; border-left: 3px solid #f59e0b;">
                            <strong style="color: #fbbf24;">Current Setup:</strong>
                            <ul style="margin-left: 20px; margin-top: 10px; color: #cbd5e1; line-height: 1.7;">
                                <li>‚úÖ What's Working: ${score.technical > 0 ? 'Technical signals' : score.macro > 0 ? 'Macro improving' : 'Some factors positive'}</li>
                                <li>‚ùå What's Against: ${score.geopolitical < 0 ? 'Geopolitical risk' : score.macro < 0 ? 'Macro headwinds' : 'Some challenges'}</li>
                                <li>‚è∞ Watch For: Fed policy signals, geopolitical developments</li>
                            </ul>
                        </div>
                    </div>
                `;
            }
            
            container.innerHTML = plan;
        }

        // Render weekly calendar
        function renderWeeklyCalendar() {
            const tbody = document.getElementById('weeklyCalendar');
            
            tbody.innerHTML = `
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Event</th>
                        <th>Impact</th>
                        <th>Strategy</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="color: #60a5fa; font-weight: 700;">Jan 31</td>
                        <td>FOMC Meeting</td>
                        <td style="color: #ef4444; font-weight: 700;">CRITICAL</td>
                        <td>Reduce risk 2 days before. Wait for guidance.</td>
                    </tr>
                    <tr>
                        <td style="color: #60a5fa; font-weight: 700;">Feb 2</td>
                        <td>Jobs Report</td>
                        <td style="color: #f59e0b; font-weight: 700;">HIGH</td>
                        <td>Strong jobs = hawkish Fed = bearish short-term</td>
                    </tr>
                    <tr>
                        <td style="color: #60a5fa; font-weight: 700;">Feb 13</td>
                        <td>CPI Report</td>
                        <td style="color: #ef4444; font-weight: 700;">CRITICAL</td>
                        <td>Falling inflation = bullish for risk assets</td>
                    </tr>
                </tbody>
            `;
        }

        // Create charts
        function createOverviewChart() {
            const ctx = document.getElementById('overviewChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['30 Days Ago', '25 Days', '20 Days', '15 Days', '10 Days', '5 Days', 'Today'],
                    datasets: [{
                        label: 'Bitcoin Price',
                        data: [98000, 101000, 99500, 102000, 103500, 102800, 104500],
                        borderColor: '#f59e0b',
                        backgroundColor: 'rgba(245, 158, 11, 0.1)',
                        tension: 0.4,
                        borderWidth: 3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Bitcoin 30-Day Price Trend',
                            font: { size: 16, weight: 'bold' },
                            color: '#1e293b'
                        },
                        legend: {
                            labels: { color: '#1e293b', font: { size: 13 } }
                        }
                    },
                    scales: {
                        y: {
                            ticks: { color: '#1e293b' },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        },
                        x: {
                            ticks: { color: '#1e293b' },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        }
                    }
                }
            });
        }

        function createMacroChart() {
            const ctx = document.getElementById('macroChart').getContext('2d');
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['2020 COVID', '2021 Stimulus', '2022 Rate Hikes', '2023 Recovery', '2024-Now'],
                    datasets: [
                        {
                            label: 'Bitcoin %',
                            data: [-50, 300, -65, 50, -10],
                            backgroundColor: 'rgba(245, 158, 11, 0.8)',
                            borderColor: '#f59e0b',
                            borderWidth: 2
                        },
                        {
                            label: 'Gold %',
                            data: [25, 5, 8, 12, 5],
                            backgroundColor: 'rgba(234, 179, 8, 0.8)',
                            borderColor: '#eab308',
                            borderWidth: 2
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Asset Performance During Macro Events',
                            font: { size: 16, weight: 'bold' },
                            color: '#1e293b'
                        },
                        legend: {
                            labels: { color: '#1e293b', font: { size: 13 } }
                        }
                    },
                    scales: {
                        y: {
                            ticks: { color: '#1e293b' },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        },
                        x: {
                            ticks: { color: '#1e293b' },
                            grid: { color: 'rgba(0,0,0,0.1)' }
                        }
                    }
                }
            });
        }

        // Tab switching
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Initialize
        function init() {
            renderOverallScore();
            renderSummaryRecommendation();
            renderQuickMetrics();
            renderTechnicalIndicators();
            renderMacroIndicators();
            renderGeopoliticalEvents();
            renderGeopoliticalAlert();
            renderTradingPlan();
            renderWeeklyCalendar();
            createOverviewChart();
            createMacroChart();
        }

        // Auto-refresh every 5 minutes
        setInterval(() => {
            updateTimestamp();
            init();
        }, 300000);

        // Initial load
        init();
    </script>
</body>
</html>
